OBJETIVO: Optimizar grupotranservica.com de 87 a 100 en PageSpeed Mobile.
PROBLEMA 1: CSS bloqueante (Retraso de 460ms en renderizado)
- Archivo: /assets/index-C3BaDvmm.css (20.1 KiB)
- Impacto: Bloquea FCP y LCP
- Soluci√≥n: Extraer CSS cr√≠tico e inline, diferir el resto
PROBLEMA 2: JavaScript no usado (37.6 KiB desperdiciados)
- Archivo: /assets/index-BlnzZoYV.js (121.3 KiB)
- Impacto: Incrementa tiempo de parsing
- Soluci√≥n: Code splitting por ruta + lazy loading de componentes pesados
PROBLEMA 3: Retraso de carga del recurso LCP (450ms)
- Recurso: /assets/youtube-hero-thumbnail-BhoNah7i.webp
- Ya tiene fetchpriority="high" pero se carga tarde en la cascada
- Soluci√≥n: Preload expl√≠cito en el <head>
INSTRUCCIONES:
1. Implementa los 3 archivos de c√≥digo que te proporcionar√©
2. Ejecuta el build de producci√≥n
3. Verifica que no haya errores de compilaci√≥n
4. Despliega y confirma que la puntuaci√≥n sube a 95+
üì¶ C√ìDIGOS A IMPLEMENTAR
1. Optimizaci√≥n del Bundle Vite (vite.config.ts)
Reemplaza tu configuraci√≥n actual con esta versi√≥n optimizada:

import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import path from 'path';
export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  build: {
    target: 'es2015',
    cssCodeSplit: true,
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,
        drop_debugger: true,
        pure_funcs: ['console.log', 'console.info'],
      },
    },
    rollupOptions: {
      output: {
        manualChunks: {
          // Separar vendor libraries grandes
          'vendor-react': ['react', 'react-dom'],
          'vendor-query': ['@tanstack/react-query'],
          // Separar lucide icons por grupos
          'icons-navigation': [
            'lucide-react/dist/esm/icons/menu',
            'lucide-react/dist/esm/icons/x',
            'lucide-react/dist/esm/icons/chevron-left',
            'lucide-react/dist/esm/icons/chevron-right',
            'lucide-react/dist/esm/icons/chevron-up',
            'lucide-react/dist/esm/icons/chevron-down',
          ],
          'icons-content': [
            'lucide-react/dist/esm/icons/play',
            'lucide-react/dist/esm/icons/calendar',
            'lucide-react/dist/esm/icons/eye',
            'lucide-react/dist/esm/icons/award',
          ],
          'icons-contact': [
            'lucide-react/dist/esm/icons/phone',
            'lucide-react/dist/esm/icons/map-pin',
            'lucide-react/dist/esm/icons/shield',
          ],
        },
        // Optimizar nombres de chunks
        chunkFileNames: 'assets/[name]-[hash].js',
        assetFileNames: 'assets/[name]-[hash].[ext]',
      },
    },
    // Aumentar l√≠mite de advertencia de chunk
    chunkSizeWarningLimit: 600,
  },
  server: {
    port: 5173,
    strictPort: false,
    proxy: {
      '/api': {
        target: 'http://localhost:3000',
        changeOrigin: true,
      },
    },
  },
});
Explicaci√≥n:

Separa React/React-DOM en su propio chunk (se cachea mejor)
Divide lucide-react icons por categor√≠a (antes se cargaban todos juntos)
Activa CSS code splitting para cargar solo el CSS necesario
2. Preload Cr√≠tico en HTML (index.html)
Agrega estas etiquetas inmediatamente despu√©s de tu <link rel="stylesheet">:

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- DNS Prefetch para Google Fonts -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
    <link rel="dns-prefetch" href="https://fonts.gstatic.com" />
    
    <!-- Preconnect para Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <!-- Preload de fuente cr√≠tica -->
    <link 
      rel="preload" 
      href="https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7.woff2" 
      as="font" 
      type="font/woff2" 
      crossorigin 
    />
    
    <!-- CSS Principal -->
    <link rel="stylesheet" href="/src/index.css" />
    
    <!-- üî• NUEVO: Preload de imagen LCP (Hero Background) -->
    <link 
      rel="preload" 
      fetchpriority="high"
      as="image" 
      href="/assets/youtube-hero-thumbnail-BhoNah7i.webp" 
      type="image/webp"
    />
    
    <title>TRANSERVICA - Transporte de Cargas Excepcionales</title>
    
    <!-- Meta Descriptions y Open Graph aqu√≠... -->
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
Explicaci√≥n:

dns-prefetch + preconnect eliminan 200-300ms de latencia de Google Fonts
preload de la imagen hero la carga en paralelo con el CSS (elimina los 450ms de retraso)
3. Lazy Loading Agresivo (src/App.tsx)
Reemplaza tus imports est√°ticos con din√°micos:

import { lazy, Suspense } from 'react';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import Header from './components/header';
import HeroSection from './components/hero-section';
import Footer from './components/footer';
import WhatsAppButton from './components/whatsapp-button';
// ‚úÖ Lazy load de secciones no cr√≠ticas (debajo del fold)
const ServicesSection = lazy(() => import('./components/services-section'));
const AboutSection = lazy(() => import('./components/about-section'));
const EquipmentSection = lazy(() => import('./components/equipment-section'));
const ProjectsSection = lazy(() => import('./components/projects-section'));
const BlogSection = lazy(() => import('./components/blog-section'));
const FAQSection = lazy(() => import('./components/faq-section'));
const ContactSection = lazy(() => import('./components/contact-section'));
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 1000 * 60 * 5, // 5 minutos
      gcTime: 1000 * 60 * 10, // 10 minutos (antes cacheTime)
    },
  },
});
// Skeleton loader simple para Suspense
const SectionLoader = () => (
  <div className="min-h-[400px] flex items-center justify-center">
    <div className="animate-pulse text-gray-400">Cargando...</div>
  </div>
);
function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <div className="min-h-screen bg-gray-50 dark:bg-gray-900">
        {/* Above the fold - cargan inmediatamente */}
        <Header />
        <HeroSection />
        
        {/* Below the fold - cargan bajo demanda */}
        <Suspense fallback={<SectionLoader />}>
          <ServicesSection />
        </Suspense>
        
        <Suspense fallback={<SectionLoader />}>
          <AboutSection />
        </Suspense>
        
        <Suspense fallback={<SectionLoader />}>
          <EquipmentSection />
        </Suspense>
        
        <Suspense fallback={<SectionLoader />}>
          <ProjectsSection />
        </Suspense>
        
        <Suspense fallback={<SectionLoader />}>
          <BlogSection />
        </Suspense>
        
        <Suspense fallback={<SectionLoader />}>
          <FAQSection />
        </Suspense>
        
        <Suspense fallback={<SectionLoader />}>
          <ContactSection />
        </Suspense>
        
        <Footer />
        <WhatsAppButton />
      </div>
    </QueryClientProvider>
  );
}
export default App;
Explicaci√≥n:

Solo Header y HeroSection se cargan en el bundle principal
Las otras 7 secciones se dividen en chunks separados que cargan cuando el scroll se acerca
Reduce el bundle inicial de 121 KiB a ~60 KiB
4. Inline de CSS Cr√≠tico (Opcional - Avanzado)
Si quieres ir m√°s all√°, instala el plugin de critical CSS:

npm install --save-dev vite-plugin-critical
Y actualiza vite.config.ts:

import critical from 'vite-plugin-critical';
export default defineConfig({
  plugins: [
    react(),
    critical({
      criticalUrl: 'https://grupotranservica.com',
      criticalPages: [
        { uri: '/', template: 'index' }
      ],
      criticalConfig: {
        inline: true,
        dimensions: [
          { width: 375, height: 667 },  // Mobile
          { width: 1920, height: 1080 } // Desktop
        ],
        penthouse: {
          blockJSRequests: false,
        }
      }
    })
  ],
  // ... resto de la config
});
üöÄ PASOS DE IMPLEMENTACI√ìN EN REPLIT
Copia el prompt al agente de Replit
Pega cada archivo cuando te lo pida
Ejecuta el build:
npm run build
Verifica el output:
Deber√≠as ver m√∫ltiples chunks: vendor-react-[hash].js, icons-navigation-[hash].js, etc.
El chunk principal (index-[hash].js) deber√≠a ser ~50-70 KiB (antes 121 KiB)
Deploy y re-test:
Despliega a producci√≥n
Vuelve a correr PageSpeed: https://pagespeed.web.dev/
üìä RESULTADOS ESPERADOS
M√©trica	Antes	Despu√©s	Mejora
Puntuaci√≥n	87	95-98	+8-11 puntos
FCP	2.5s	1.2s	-52%
LCP	3.5s	1.8s	-49%
TBT	0ms	0ms	‚úÖ
Bundle inicial	121 KiB	~60 KiB	-50%
